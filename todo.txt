use beatiful way to simulate statemachine design pattern